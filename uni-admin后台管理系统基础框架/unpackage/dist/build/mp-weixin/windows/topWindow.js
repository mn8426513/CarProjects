"use strict";const e=require("../common/vendor.js"),o=require("../admin.config.js"),n={components:{errorLog:()=>"./components/error-log.js"},props:{navigationBarTitleText:{type:String},matchLeftWindow:{type:Boolean},showLeftWindow:{type:Boolean}},data:()=>({...o.config.navBar,popupMenuOpened:!1,mpCapsule:0,langIndex:0}),computed:{...e.mapState("app",["appName","routes","theme"]),...e.mapState("error",["logs"]),userInfo(){return this.$uniIdPagesStore.store.userInfo},themeIndex(){let e=0;return this.themes.forEach(((o,n)=>{o.value===this.theme&&(e=n)})),e}},mounted(){let o=e.index.getMenuButtonBoundingClientRect();this.mpCapsule=o.width},methods:{...e.mapMutations("app",["SET_THEME"]),showErrorLogs(){this.popupMenuOpened&&(this.popupMenuOpened=!1),this.$refs.errorLogsPopup.open()},showPasswordPopup(){this.popupMenuOpened&&(this.popupMenuOpened=!1),this.$refs.passwordPopup.open()},logout(){this.popupMenuOpened=!1,this.$uniIdPagesStore.mutations.logout()},toggleSidebar(){this.showLeftWindow?e.index.hideLeftWindow():e.index.showLeftWindow()},togglePopupMenu(){this.popupMenuOpened=!this.popupMenuOpened},changePassword(){e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd",complete:()=>{this.popupMenuOpened=!1}})},changeLanguage(o){let n="object"==typeof o?o.detail.value:o;(!n||n<0)&&(n=0);const t=this.langs[n].lang||"zh-Hans";"android"!==e.index.getSystemInfoSync().platform?(this.$i18n.locale=t,this.langIndex=n,e.index.setLocale(t)):e.index.showToast({icon:"error",title:"暂不支持",duration:2e3})},linkTo(){e.index.reLaunch({url:"/"})},changeTheme(e){const o="object"==typeof e?e.detail.value:e,n=this.themes[o].value||"default";this.theme!==n&&this.SET_THEME(n)}}};if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("error-log")+e.resolveComponent("uni-popup"))()}Math||((()=>"../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t=e._export_sfc(n,[["render",function(o,n,t,p,s,u){return e.e({a:o.logo,b:e.t(o.appName),c:e.o(((...e)=>u.linkTo&&u.linkTo(...e))),d:e.o(u.toggleSidebar),e:e.p({type:"bars",size:"30",color:"#999"}),f:e.t(t.navigationBarTitleText),g:e.p({type:"color-filled",size:"24",color:"#999"}),h:o.themes,i:u.themeIndex,j:e.o(((...e)=>u.changeTheme&&u.changeTheme(...e))),k:o.langs,l:e.o(((...e)=>u.changeLanguage&&u.changeLanguage(...e))),m:s.langIndex,n:e.t(u.userInfo.nickname||u.userInfo.username||u.userInfo.mobile||u.userInfo.email),o:e.p({type:"arrowdown",color:"#666",size:"13"}),p:u.userInfo.nickname||u.userInfo.username||u.userInfo.mobile||u.userInfo.email,q:e.o(((...e)=>u.togglePopupMenu&&u.togglePopupMenu(...e))),r:e.o(((...e)=>u.togglePopupMenu&&u.togglePopupMenu(...e))),s:u.userInfo.nickname||u.userInfo.username||u.userInfo.mobile||u.userInfo.email},u.userInfo.nickname||u.userInfo.username||u.userInfo.mobile||u.userInfo.email?{t:e.t(o.$t("topwindow.text.changePwd")),v:e.o(((...e)=>u.changePassword&&u.changePassword(...e))),w:e.t(o.$t("topwindow.text.signOut")),x:e.o(((...e)=>u.logout&&u.logout(...e)))}:{},{y:t.matchLeftWindow?"":1,z:s.popupMenuOpened?1:"",A:e.sr("errorLogsPopup","110d2cf6-3"),B:e.p({type:"center"})})}]]);wx.createComponent(t);

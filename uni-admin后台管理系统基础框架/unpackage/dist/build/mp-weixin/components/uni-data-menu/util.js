"use strict";function n(e,t,i){let r=[];for(let n=e.length-1;n>-1;n--){const u=e[n],l=t.filter((n=>{if(n.parent_id===u.menu_id)return i.push(n.menu_id),!0}));r=r.concat(l),u.children=l}r.length&&n(r,t,i)}function e(n,e){const t=[];let i=n;for(;i&&i.parent_id;)t.push(i.parent_id),i=e.find((n=>n.menu_id===i.parent_id));return t}exports.buildMenus=function(t,i=!0){if(t=t.sort((function(n,i){const r=e(n,t),u=e(i,t);return r.includes(i.menu_id)?1:r.length-u.length||n.sort-i.sort})),i)for(let n=t.length-1;n>-1;n--){const e=t[n],i=t.filter((n=>n.parent_id===e.menu_id));e.isLeafNode||i.length||t.splice(n,1)}const r=[],u=t.filter((n=>{if(!n.parent_id)return r.push(n.menu_id),!0}));return n(u,t,r),i||r.length===t.length||u.push(...t.filter((n=>!r.includes(n.menu_id)))),u};

"use strict";const e=require("../../../common/vendor.js"),i=require("../../../js_sdk/validator/uni-id-permissions.js"),n=e.er.database();n.command;function t(e){let n={};for(let t in i.validator)e.includes(t)&&(n[t]=i.validator[t]);return n}const o={data(){let e={permission_id:"",permission_name:"",comment:""};return{formData:e,formOptions:{},rules:{...t(Object.keys(e))}}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){e.index.showLoading({mask:!0}),this.$refs.form.validate().then((e=>{this.submitForm(e)})).catch((()=>{e.index.hideLoading()}))},submitForm(i){n.collection("uni-id-permissions").add(i).then((i=>{e.index.showToast({title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>e.index.navigateBack()),500)})).catch((i=>{e.index.showModal({content:i.message||"请求服务失败",showCancel:!1})})).finally((()=>{e.index.hideLoading()}))}}};if(!Array){(e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const a=e._export_sfc(o,[["render",function(i,n,t,o,a,s){return{a:e.o([e=>a.formData.permission_id=e.detail.value,e=>i.binddata("permission_id",e.detail.value)]),b:a.formData.permission_id,c:e.p({name:"permission_id",label:"权限ID",required:!0}),d:e.o([e=>a.formData.permission_name=e.detail.value,e=>i.binddata("permission_name",e.detail.value)]),e:a.formData.permission_name,f:e.p({name:"permission_name",label:"权限名称",required:!0}),g:e.o([e=>a.formData.comment=e.detail.value,e=>i.binddata("comment",e.detail.value)]),h:a.formData.comment,i:e.p({name:"comment",label:"备注"}),j:e.t(i.$t("common.button.submit")),k:e.o(((...e)=>s.submit&&s.submit(...e))),l:e.t(i.$t("common.button.back")),m:e.sr("form","59bdd522-0"),n:e.p({value:a.formData,validateTrigger:"bind"})}}]]);wx.createPage(a);

"use strict";const e=require("../../../common/vendor.js"),t=e.er.database(),n=["user_id.username","user_id.nickname","type","ip"],i={data:()=>({collectionList:[t.collection("uni-id-log").field("type, ip, create_date, user_id").getTemp(),t.collection("uni-id-users").field("_id, username,nickname").getTemp()],query:"",where:"",orderby:"create_date desc",options:{pageSize:20,pageCurrent:1}}),methods:{getWhere(){const t=this.query.trim();if(!t)return"";let i;try{i=new RegExp(t,"i")}catch(o){return void e.index.showToast({title:"请勿输入等不满足正则格式的符号",icon:"none"})}return n.map((e=>i+".test("+e+")")).join(" || ")},search(){const e=this.getWhere(),t=e===this.where;this.where=e,t&&this.loadData()},loadData(e=!0){this.$refs.udb.loadData({clear:e})},onPageChanged(e){this.$refs.udb.loadData({current:e.current})},navigateTo(t){e.index.navigateTo({url:t,events:{refreshData:()=>{this.loadData()}}})},selectedItems(){let e=this.$refs.udb.dataList;return this.selectedIndexs.map((t=>e[t]._id))},delTable(){this.$refs.udb.remove(this.selectedItems())},selectionChange(e){this.selectedIndexs=e.detail.index},confirmDelete(e){this.$refs.udb.remove(e)}}};if(!Array){(e.resolveComponent("uni-stat-breadcrumb")+e.resolveComponent("uni-th")+e.resolveComponent("uni-tr")+e.resolveComponent("uni-td")+e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-table")+e.resolveComponent("uni-pagination")+e.resolveComponent("unicloud-db"))()}Math||((()=>"../../../components/uni-stat-breadcrumb/uni-stat-breadcrumb.js")+(()=>"../../../uni_modules/uni-table/components/uni-th/uni-th.js")+(()=>"../../../uni_modules/uni-table/components/uni-tr/uni-tr.js")+(()=>"../../../uni_modules/uni-table/components/uni-td/uni-td.js")+(()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../../uni_modules/uni-table/components/uni-table/uni-table.js")+(()=>"../../../uni_modules/uni-pagination/components/uni-pagination/uni-pagination.js")+(()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js"))();const o=e._export_sfc(i,[["render",function(t,n,i,o,r,a){return{a:e.o(((...e)=>a.search&&a.search(...e))),b:t.$t("common.placeholder.query"),c:r.query,d:e.o((e=>r.query=e.detail.value)),e:e.t(t.$t("common.button.search")),f:e.o(((...e)=>a.search&&a.search(...e))),g:e.w((({data:t,pagination:n,loading:i,error:o},r,a)=>({a:"eebd866c-4-"+a+",eebd866c-3-"+a,b:"eebd866c-5-"+a+",eebd866c-3-"+a,c:"eebd866c-6-"+a+",eebd866c-3-"+a,d:"eebd866c-7-"+a+",eebd866c-3-"+a,e:"eebd866c-8-"+a+",eebd866c-3-"+a,f:"eebd866c-9-"+a+",eebd866c-3-"+a,g:"eebd866c-3-"+a+",eebd866c-2-"+a,h:e.f(t,((t,i,o)=>({a:e.t((n.current-1)*n.size+(i+1)),b:"eebd866c-11-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,c:e.t(t.user_id[0]&&t.user_id[0].username||"-"),d:"eebd866c-12-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,e:e.t(t.user_id[0]&&t.user_id[0].nickname||"-"),f:"eebd866c-13-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,g:e.t(t.type),h:"eebd866c-14-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,i:e.t(t.ip),j:"eebd866c-15-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,k:"eebd866c-17-"+a+"-"+o+",eebd866c-16-"+a+"-"+o,l:e.p({date:t.create_date,threshold:[0,0]}),m:"eebd866c-16-"+a+"-"+o+",eebd866c-10-"+a+"-"+o,n:i,o:"eebd866c-10-"+a+"-"+o+",eebd866c-2-"+a}))),i:"eebd866c-2-"+a+",eebd866c-1",j:e.p({loading:i,emptyText:o.message||"没有更多数据",border:!0,stripe:!0}),k:"eebd866c-18-"+a+",eebd866c-1",l:e.o((e=>n.current=e)),m:e.p({"show-icon":!0,"page-size":n.size,total:n.count,modelValue:n.current}),n:a,o:r})),{name:"d",path:"g",vueId:"eebd866c-1"}),h:e.p({align:"center"}),i:e.p({align:"center"}),j:e.p({align:"center"}),k:e.p({align:"center"}),l:e.p({align:"center"}),m:e.p({align:"center"}),n:e.p({align:"center"}),o:e.p({align:"center"}),p:e.p({align:"center"}),q:e.p({align:"center"}),r:e.p({align:"center"}),s:e.p({align:"center"}),t:e.o(a.onPageChanged),v:e.sr("udb","eebd866c-1"),w:e.p({collection:r.collectionList,options:r.options,where:r.where,"page-data":"replace",orderby:r.orderby,getcount:!0,"page-size":r.options.pageSize,"page-current":r.options.pageCurrent})}}]]);wx.createPage(o);

"use strict";const e=require("../../../common/vendor.js"),t=require("../../../js_sdk/validator/uni-id-tag.js"),n=e.er.database(),i=[],a={ascending:"asc",descending:"desc"},o={data:()=>({query:"",where:"",orderby:"",orderByFieldName:"",selectedIndexs:[],options:{pageSize:20,pageCurrent:1,filterData:{},...t.enumConverter},imageStyles:{width:64,height:64},exportExcel:{filename:"uni-id-tag.xls",type:"xls",fields:{"标签的tagid":"tagid","标签名称":"name","标签描述":"description"}},exportExcelData:[]}),onLoad(){this._filter={}},onReady(){this.$refs.udb.loadData()},computed:{smsReceiver(){if(this.selectedIndexs.length){let e=this.$refs.udb.dataList;return this.selectedIndexs.map((t=>e[t].tagid))}}},methods:{onqueryload(e){this.exportExcelData=e},changeSize(e){this.options.pageSize=e,this.options.pageCurrent=1,this.$nextTick((()=>{this.loadData()}))},getWhere(){const e=this.query.trim();if(!e)return"";const t=new RegExp(e,"i");return i.map((e=>t+".test("+e+")")).join(" || ")},search(){const e=this.getWhere();this.where=e,this.$nextTick((()=>{this.loadData()}))},loadData(e=!0){this.$refs.udb.loadData({clear:e})},onPageChanged(e){this.selectedIndexs.length=0,this.$refs.table.clearSelection(),this.$refs.udb.loadData({current:e.current})},navigateTo(t,n){e.index.navigateTo({url:t,events:{refreshData:()=>{this.loadData(n)}}})},selectedItems(){let e=this.$refs.udb.dataList;return this.selectedIndexs.map((t=>e[t]._id))},delTable(){this.$refs.udb.remove(this.selectedItems(),{success:e=>{this.$refs.table.clearSelection()}})},selectionChange(e){this.selectedIndexs=e.detail.index},confirmDelete(e){this.$refs.udb.remove(e,{success:e=>{this.$refs.table.clearSelection()}})},sortChange(e,t){this.orderByFieldName=t,e.order?this.orderby=t+" "+a[e.order]:this.orderby="",this.$refs.table.clearSelection(),this.$nextTick((()=>{this.$refs.udb.loadData()}))},filterChange(e,i){this._filter[i]={type:e.filterType,value:e.filter};let a=t.filterToWhere(this._filter,n.command);Object.keys(a).length?this.where=a:this.where="",this.$nextTick((()=>{this.$refs.udb.loadData()}))}}};if(!Array){(e.resolveComponent("uni-stat-breadcrumb")+e.resolveComponent("download-excel")+e.resolveComponent("uni-th")+e.resolveComponent("uni-tr")+e.resolveComponent("uni-td")+e.resolveComponent("uni-tag")+e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-table")+e.resolveComponent("uni-pagination")+e.resolveComponent("unicloud-db")+e.resolveComponent("fix-window"))()}Math||((()=>"../../../components/uni-stat-breadcrumb/uni-stat-breadcrumb.js")+(()=>"../../../components/download-excel/download-excel.js")+(()=>"../../../uni_modules/uni-table/components/uni-th/uni-th.js")+(()=>"../../../uni_modules/uni-table/components/uni-tr/uni-tr.js")+(()=>"../../../uni_modules/uni-table/components/uni-td/uni-td.js")+(()=>"../../../uni_modules/uni-tag/components/uni-tag/uni-tag.js")+(()=>"../../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../../uni_modules/uni-table/components/uni-table/uni-table.js")+(()=>"../../../uni_modules/uni-pagination/components/uni-pagination/uni-pagination.js")+(()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../../components/fix-window/fix-window.js"))();const s=e._export_sfc(o,[["render",function(t,n,i,a,o,s){return{a:e.o(((...e)=>s.search&&s.search(...e))),b:o.query,c:e.o((e=>o.query=e.detail.value)),d:e.o(((...e)=>s.search&&s.search(...e))),e:e.o((e=>s.navigateTo("./add"))),f:!o.selectedIndexs.length,g:e.o(((...e)=>s.delTable&&s.delTable(...e))),h:e.p({fields:o.exportExcel.fields,data:o.exportExcelData,type:o.exportExcel.type,name:o.exportExcel.filename}),i:e.o((e=>t.$refs.batchSms.open())),j:e.w((({data:t,pagination:n,loading:i,error:a,options:o},r,d)=>({a:"6d310474-5-"+d+",6d310474-4-"+d,b:"6d310474-6-"+d+",6d310474-4-"+d,c:"6d310474-7-"+d+",6d310474-4-"+d,d:"6d310474-8-"+d+",6d310474-4-"+d,e:"6d310474-9-"+d+",6d310474-4-"+d,f:"6d310474-4-"+d+",6d310474-3-"+d,g:e.f(t,((t,n,i)=>({a:e.t(t.tagid),b:"6d310474-11-"+d+"-"+i+",6d310474-10-"+d+"-"+i,c:"6d310474-13-"+d+"-"+i+",6d310474-12-"+d+"-"+i,d:e.p({type:"primary",inverted:!0,size:"small",text:t.name}),e:"6d310474-12-"+d+"-"+i+",6d310474-10-"+d+"-"+i,f:e.t(t.description),g:"6d310474-14-"+d+"-"+i+",6d310474-10-"+d+"-"+i,h:"6d310474-16-"+d+"-"+i+",6d310474-15-"+d+"-"+i,i:e.p({threshold:[0,0],date:t.create_date}),j:"6d310474-15-"+d+"-"+i+",6d310474-10-"+d+"-"+i,k:e.o((e=>s.navigateTo("../user/list?tagid="+t.tagid,!1)),n),l:e.o((e=>s.navigateTo("./edit?id="+t._id,!1)),n),m:e.o((e=>s.confirmDelete(t._id)),n),n:"6d310474-17-"+d+"-"+i+",6d310474-10-"+d+"-"+i,o:n,p:"6d310474-10-"+d+"-"+i+",6d310474-3-"+d}))),h:e.sr("table","6d310474-3-"+d+",6d310474-2"),i:"6d310474-3-"+d+",6d310474-2",j:e.p({loading:i,emptyText:a.message||"没有更多数据",border:!0,stripe:!0,type:"selection"}),k:"6d310474-18-"+d+",6d310474-2",l:e.o((e=>n.current=e)),m:e.p({"show-iconn":!0,"show-page-size":!0,"page-size":n.size,total:n.count,modelValue:n.current}),n:d,o:r})),{name:"d",path:"j",vueId:"6d310474-2"}),k:e.o((e=>s.filterChange(e,"tagid"))),l:e.o((e=>s.sortChange(e,"tagid"))),m:e.p({align:"center","filter-type":"search",sortable:!0}),n:e.o((e=>s.filterChange(e,"name"))),o:e.o((e=>s.sortChange(e,"name"))),p:e.p({align:"center","filter-type":"search",sortable:!0}),q:e.o((e=>s.filterChange(e,"description"))),r:e.o((e=>s.sortChange(e,"description"))),s:e.p({align:"center","filter-type":"search",sortable:!0}),t:e.o((e=>s.filterChange(e,"create_date"))),v:e.o((e=>s.sortChange(e,"create_date"))),w:e.p({align:"center","filter-type":"timestamp",sortable:!0}),x:e.p({align:"center"}),y:e.p({align:"center"}),z:e.p({align:"center"}),A:e.p({align:"center"}),B:e.p({align:"center"}),C:e.p({align:"center"}),D:e.o(s.selectionChange),E:e.o(s.onPageChanged),F:e.o(s.changeSize),G:e.sr("udb","6d310474-2"),H:e.o(s.onqueryload),I:e.p({collection:"uni-id-tag",field:"tagid,name,description,create_date",where:o.where,"page-data":"replace",orderby:o.orderby,getcount:!0,"page-size":o.options.pageSize,"page-current":o.options.pageCurrent,options:o.options,loadtime:"manual"})}}]]);wx.createPage(s);

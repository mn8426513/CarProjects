"use strict";const e=require("../../../common/vendor.js"),t=require("../../../js_sdk/validator/uni-id-tag.js"),i=e.er.database();i.command;function a(e){let i={};for(let a in t.validator)e.includes(a)&&(i[a]=t.validator[a]);return i}const n={data(){let e={tagid:"",name:"",description:""};return{formData:e,formOptions:{},rules:{...a(Object.keys(e))}}},onLoad(e){if(e.id){const t=e.id;this.formDataId=t,this.getDetail(t)}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){e.index.showLoading({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{e.index.hideLoading()}))},submitForm(t){return i.collection("uni-id-tag").doc(this.formDataId).update(t).then((t=>{e.index.showToast({title:"修改成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>e.index.navigateBack()),500)})).catch((t=>{e.index.showModal({content:t.message||"请求服务失败",showCancel:!1})}))},getDetail(t){e.index.showLoading({mask:!0}),i.collection("uni-id-tag").doc(t).field("tagid,name,description").get().then((e=>{const t=e.result.data[0];t&&(this.formData=t)})).catch((t=>{e.index.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((()=>{e.index.hideLoading()}))}}};if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const o=e._export_sfc(n,[["render",function(t,i,a,n,o,s){return{a:e.o((e=>o.formData.tagid=e)),b:e.p({disabled:!0,placeholder:"标签tagid",modelValue:o.formData.tagid}),c:e.p({name:"tagid",label:"标签的tagid",required:!0}),d:e.o((e=>o.formData.name=e)),e:e.p({placeholder:"标签名称",modelValue:o.formData.name}),f:e.p({name:"name",label:"标签名称",required:!0}),g:e.o([e=>o.formData.description=e.detail.value,e=>t.binddata("description",e.detail.value)]),h:o.formData.description,i:e.p({name:"description",label:"标签描述"}),j:e.o(((...e)=>s.submit&&s.submit(...e))),k:e.sr("form","7c792be0-0"),l:e.p({value:o.formData,validateTrigger:"bind"})}}]]);wx.createPage(o);

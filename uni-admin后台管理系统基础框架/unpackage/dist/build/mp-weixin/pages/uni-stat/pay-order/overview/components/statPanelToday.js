"use strict";const e=require("../../../../../common/vendor.js"),t=require("../../../../../js_sdk/uni-stat/util.js");require("../../../../../js_sdk/uni-stat/timeUtil.js");const n=require("../fieldsMap.js"),i={props:{query:{type:[Object],default:function(){return{}}}},data:()=>({tableName:"uni-stat-pay-result",panelData:n.fieldsGroupMap,loading:!1}),created(){this.getCloudDataDebounce=t.debounce((()=>{this.getCloudData()}),300),this.getCloudDataDebounce()},methods:{getCloudData(){let i=this.query;if(!i.appid)return;this.loading=!0;const a=t.stringifyQuery({...i,start_time:[t.getTimeOfSomeDayAgo(0),Date.now()]},!0,["uni_platform"]);e.er.database().collection(this.tableName).where(a).field(`${t.stringifyField(n.fieldsMap)}, dimension, stat_date.date_str as stat_time, start_time`).groupBy("stat_time, dimension").groupField(t.stringifyGroupField(n.fieldsMap)).orderBy("stat_time","desc").get().then((e=>{let i=e.result.data;i=t.formatterData({fieldsMap:n.fieldsMap,data:i});let a=i.find((e=>"day"===e.dimension&&e.stat_time===t.parseDateTime(t.getTimeOfSomeDayAgo(0),"")));a||(a=i.find((e=>"hour"===e.dimension&&e.stat_time===t.parseDateTime(t.getTimeOfSomeDayAgo(0),"")))||{}),this.loading=!1,this.panelData=this.setPanelData(a)}))},setPanelData(e){let t=this.panelData;return t.map(((t,n)=>{t.list.map(((t,n)=>{t.value=e[t.field]||0}))})),t}},watch:{query:{deep:!0,handler(e){this.getCloudDataDebounce()}}}};if(!Array){(e.resolveComponent("uni-th")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-tooltip")+e.resolveComponent("uni-tr")+e.resolveComponent("uni-td")+e.resolveComponent("uni-table"))()}Math||((()=>"../../../../../uni_modules/uni-table/components/uni-th/uni-th.js")+(()=>"../../../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../../../uni_modules/uni-tooltip/components/uni-tooltip/uni-tooltip.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-tr/uni-tr.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-td/uni-td.js")+(()=>"../../../../../uni_modules/uni-table/components/uni-table/uni-table.js"))();const a=e._export_sfc(i,[["render",function(t,n,i,a,o,s){return{a:e.p({align:"center"}),b:e.f(o.panelData,((t,n,i)=>({a:e.t(t.title),b:"2f62b91c-5-"+i+",2f62b91c-4-"+i,c:e.f(t.list,((t,n,i)=>({a:e.t(t.tooltip),b:n}))),d:"2f62b91c-4-"+i+",2f62b91c-3-"+i,e:n,f:"2f62b91c-3-"+i+",2f62b91c-1"}))),c:e.p({type:"help",color:"#666"}),d:e.p({align:"center"}),e:e.p({align:"center"}),f:e.f(o.panelData,((t,n,i)=>({a:e.t(t.list[0].value),b:n,c:"2f62b91c-8-"+i+",2f62b91c-6"}))),g:e.p({align:"center"}),h:e.p({align:"center"}),i:e.f(o.panelData,((t,n,i)=>({a:e.t(t.list[1].value),b:n,c:"2f62b91c-11-"+i+",2f62b91c-9"}))),j:e.p({align:"center"}),k:e.p({align:"center"}),l:e.f(o.panelData,((t,n,i)=>({a:e.t(t.list[2].value),b:n,c:"2f62b91c-14-"+i+",2f62b91c-12"}))),m:e.p({align:"center"}),n:e.p({loading:o.loading,border:!0,stripe:!0,emptyText:"暂无更多数据"})}}],["__scopeId","data-v-2f62b91c"]]);wx.createComponent(a);
